const book7Questions = [
    {
      question: "On the way into Malfoy Manor - what pure-white animals would you see on your way to the front door?",
      answers: {
          a: "Snakes",
          b: "Wolves",
          c: "Peacocks<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          d: "Red deer stags"
      },
      correctAnswer: 'c'
    },
    {
      question: "What was Albus Dumbledore's father called?",
      answers: {
          a: "Aberforth",
          b: "Wulfric",
          c: "Brian",
          d: "Percival<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "Which two members of the Order of the Phoenix came to escort the Dursleys away from Privet Drive?",
      answers: {
          a: "Dedalus Diggle & Hestia Jones<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          b: "Emmeline Vance & Hestia Jones",
          c: "Sturgis Podmore & Dedalus Diggle",
          d: "Benjy Fenwick & Emmeline Vance"
      },
      correctAnswer: 'a'
    },
    {
      question: "What colour does polyjuice potion turn after the addition of Harry's hair?",
      answers: {
          a: "Emerald Green",
          b: "Muddy-brown",
          c: "Silver",
          d: "Gold<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "When Hermione modified her parent's memories, what did she make them think their names were?",
      answers: {
          a: "William and Margaret Warburton",
          b: "Winston and Marina Walton",
          c: "Wendell and Monica Wilkins<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          d: "Wilbur and Mariana Webb"
      },
      correctAnswer: 'c'
    },
    {
      question: "What is Ron's cover story illness for not going back to Hogwarts?",
      answers: {
          a: "Spattergroit<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          b: "Plague",
          c: "Mumblemumps",
          d: "Squabbs Syndrome"
      },
      correctAnswer: 'a'
    },
    {
      question: "What birthday gift did Harry receive from Mr and Mrs Weasley?",
      answers: {
          a: "A box of chocolates",
          b: "An enchanted razor",
          c: "A watch<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          d: "A new jumper"
      },
      correctAnswer: 'c'
    },
    {
      question: "Where did Hermoine, Harry and Ron disapparate to after leaving Bill and Fleur's wedding?",
      answers: {
          a: "Oxford Street",
          b: "Tottenham Court Road<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          c: "Shaftesbury Avenue",
          d: "Regent Street"
      },
      correctAnswer: 'b'
    },
    {
      question: "What food was Kreacher preparing or Harry, Ron and Hermione on their return from the Ministry of Magic?",
      answers: {
          a: "Tomato tortellini soup",
          b: "French onion soup",
          c: "Beef and vegetable casserole",
          d: "Steak and kidney pie<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "Who forged the first Golden Snitch?",
      answers: {
          a: "Cornelius Agrippa",
          b: "Godric Gryffindor",
          c: "Bowman Wright<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          d: "Alberta Toothill"
      },
      correctAnswer: 'c'
    },
    {
      question: "Who was Bathilda Bagshot's great-nephew?",
      answers: {
          a: "Gellert Grindewald<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          b: "Albus Dumbledore",
          c: "Newt Scamander",
          d: "Elphias Doge"
      },
      correctAnswer: 'a'
    },
    {
      question: "Where were Harry and Hermoine when the 'silver doe' appeared to guide Harry to the sword of Griffindor",
      answers: {
          a: "Forest of Bowland",
          b: "Ashdown Forest",
          c: "Delamere Forest",
          d: "Forest of Dean<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "The sign on the gate at the Lovegood's house had three lines of text: 'THE QUIBBLER. EDITOR, X. LOVEGOOD', 'PICK YOUR OWN MISTLETOE' and... What did the third line say?",
      answers: {
          a: "Watch out for the Gulping Plimpies!",
          b: "Don't step on the Crumple-Horned Snorkacks",
          c: "Keep off the dirigible plums<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          d: "But be careful of the Nargles!"
      },
      correctAnswer: 'c'
    },
    {
      question: "Which of the Peverell brothers recieved Death's own cloak as prize for crossing the river in 'The Tale of the Three Brothers'?",
      answers: {
          a: "Ignotus<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          b: "Kastor",
          c: "Cadmus",
          d: "Antioch"
      },
      correctAnswer: 'a'
    },
    {
      question: "On the radio station 'Potterwatch' what was Lee Jordan's code name?",
      answers: {
          a: "Rapier",
          b: "Romulus",
          c: "Royal",
          d: "River<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "How did Hermione hide her beaded bag on the night they were caught by the Snatchers?",
      answers: {
          a: "Made it invisible and summoned it back to her after they were safe",
          b: "Stuffed it down her sock<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          c: "Transfigured it into a jacket, which she wore",
          d: "She didn't... The snatchers found it and emptied it at Malfoy Manor"
      },
      correctAnswer: 'b'
    },
    {
      question: "On their arrival into Diagon Alley (with Hermione disguised as Belatrix Lestrange) and their walk to Gringotts, which Death Eater found and accompanied them into the bank?",
      answers: {
          a: "Travers<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          b: "Selwyn",
          c: "Wilkes",
          d: "Macnair"
      },
      correctAnswer: 'a'
    },
    {
      question: "How did Helena Ravenclaw come to posses the Diadem of Ravenclaw while she was still alive?",
      answers: {
          a: "She inheritted it after Rowena Ravenclaw became fatally ill",
          b: "She was gifted it by Rowena Ravenclaw",
          c: "She never possessed it, it was lost after Rowena passed away",
          d: "She stole it from Rowena Raveclaw<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "Who produced the Fiendfyre in the Room of Requirement?",
      answers: {
          a: "Gregory Goyle",
          b: "Vincent Crabbe<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          c: "Blaise Zabini",
          d: "Draco Malfoy"
      },
      correctAnswer: 'b'
    },
    {
      question: "What is the last line written in the Harry Potter and the Deathly Hallows book?",
      answers: {
          a: "'And he finally knew, everything was as it should be.'",
          b: "'They watched as the Hogwarts Express departed platform nine and three quaters.'",
          c: "'All was well'<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png' alt='correct answer'></div>",
          d: "'They would always have each other.'"
      },
      correctAnswer: 'c'
    }    
];

alert('PLEASE NOTE: All the following questions and answers are based on the seventh Harry Potter BOOK - not the movie.');

function displayTicks(){
  const divArray = 
  Array.from(document.getElementsByClassName('tick'));
  const displayStyle = divArray[0].style.display === 'block' ? 'none' : 'block';
  divArray.forEach(function(div){
    div.style.display = displayStyle;
  });
}

// Below code inspired from https://simplestepscode.com/javascript-quiz-tutorial/ code has been altered and editted to fit the needs of the 
// Harry Potter quiz, extra elements have been added, and some removed depending on my needs. Almost all variables have been renamed to make 
// it easier for future editing and bug fixing.

let containerOfQuiz = document.getElementById('quiz');
let containerOfResults = document.getElementById('results');
let submitQuizButton = document.getElementById('submit');
let containerOfBottomLinks = document.getElementById('bottomLinks');

generateQuiz(book7Questions, containerOfQuiz, containerOfResults, submitQuizButton, containerOfBottomLinks);

function generateQuiz(questions, containerOfQuiz, containerOfResults, submitQuizButton){
  // show questions right away
  showQuizQuestions(questions, containerOfQuiz);
  // store output and answer choices for each question
  function showQuizQuestions(questions, containerOfQuiz){
    let output = [];
    let answers;
    for(let i=0; i<questions.length; i++){
      // reset the list of answers
      answers = [];
      /* for each available answer, add a radio button for selection of only one answer (this will be 
      removed via CSS and the whole label will be selectable by the user with stylings affecting the whole label) to show selection*/
      for(let letter in questions[i].answers){
        if (questions.hasOwnProperty(i)){
        answers.push(
            '<input type="radio" id="'+ questions[i].answers[letter] +'" name="question'+i+'" value="'+letter+'">' + '<label  for="'+ questions[i].answers[letter] +'">'+ questions[i].answers[letter] +'</label>'
        );
        }
      }
      // add questions and its answers to the quiz 
      output.push(
        '<div class="question"><h3 id="quiz-questions">' +[i+1] + '. ' + questions[i].question + '</h3></div><br>' + '<div class="answers">' + answers.join('') + '</div><br>'
      );
    }
    // combine question and it's answers into one string of html and put it on the page (for all 20 questions)
    containerOfQuiz.innerHTML = output.join('');
  }
  function showResults(questions, containerOfQuiz, containerOfResults){
    // gather answer containers from the quiz
    let answerContainers = containerOfQuiz.querySelectorAll('.answers');
    // keep track of user's answers
    let userAnswer = '';
    let numCorrect = 0;
    // for each question...
    for(let i=0; i<questions.length; i++){
      // find selected answer
      userAnswer = (answerContainers[i].querySelector('input[name=question'+i+']:checked')||{}).value;
      // if answer is correct
      if(userAnswer===questions[i].correctAnswer) {
        // add the total of correct answers together and color the answer text green of all the answer labels
        numCorrect++;
        answerContainers[i].style.color = 'green';
      } else /*if answer is wrong or blank, colour the text red*/ {
        answerContainers[i].style.color = 'red';
      }
    }
    // show number of correct answers out of total
    containerOfResults.innerHTML = numCorrect + ' out of ' + questions.length;
    // Add alert once submit button is pressed for a visual prompt and a nice message for the user
    if (numCorrect <= 4){
      alert('You scored ' + numCorrect +'! Better luck next time! Try reading the books a few more times.');
    } else if (numCorrect >= 5 && numCorrect <= 7){
      alert('You scored ' + numCorrect +'! Well done, you know a little bit about Harry Potter! Maybe try re-reading the books to get a better score.');
    } else if (numCorrect >= 8 && numCorrect <= 12){
      alert('You scored ' + numCorrect +'! Well done, you know quite a bit about Harry Potter! Try rereshing your Harry Potter know-how by re-reading the books for a better score.');
    } else if (numCorrect >= 13 && numCorrect <= 16){
      alert('You scored ' + numCorrect +'! Well done, you know loads about Harry Potter! You must have read the books a few times.');
    } else if (numCorrect >= 17 && numCorrect <= 19){
      alert('You scored ' + numCorrect +'! Well done, you are almost at top marks! Try again and see if you can get 20/20.');
    } else {
      alert("You scored " + numCorrect +"! You got top marks! You're a Harry Potter wiz! Try challenging another Harry Potter nerd to see who wins!");
    }
  }
  // on submit, show results and home, reveal and refresh buttons via making containers visible
  submitQuizButton.onclick = function(){
    showResults(questions, containerOfQuiz, containerOfResults, containerOfBottomLinks);
    containerOfBottomLinks.style.display = "block";
    window.scrollTo(0,document.body.scrollHeight);
    };    
}