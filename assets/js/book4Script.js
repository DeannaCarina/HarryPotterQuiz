const book4Questions = [
  {
    question: "Frank is the gardener at the Riddle House, what is his last name?",
    answers: {
        a: "Bradley",
        b: "Brentford",
        c: "Bryce<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Bridgeman"
    },
    correctAnswer: 'c'
  },
  {
    question: "What did Dudley throw out of the window when he was threatened with the removal of his pocket money after smuggling donughts into his bedroom even though he was on a diet?",
    answers: {
        a: "His PlayStation<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "His Xbox",
        c: "His computer",
        d: "His Television"
    },
    correctAnswer: 'a'
  },
  {
    question: "What did Harry buy for Ron and Hermoine at the Quidditch World Cup for 10 Galleons each?",
    answers: {
        a: "Irish player figurines that move",
        b: "Programmes",
        c: "Irish Quidditch shirts",
        d: "Omnioculars<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "Which department at the Ministry of Magic is Ludovic Bagman head of?",
    answers: {
        a: "Department of Magical Law Enforcement",
        b: "Department of Magical Accidents and Catastrophes",
        c: "Department of Magical Games and Sports<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Department for the Regulation and Control of Magical Creatures"
    },
    correctAnswer: 'c'
  },
  {
    question: "Where is the Portkey located that will transport Harry and the Weasleys to the Quidditch World Cup?",
    answers: {
        a: "Stoatshead Hill<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Ashton Hill",
        c: "Beacon Hill",
        d: "Seven Stones Hill"
    },
    correctAnswer: 'a'
  },
  {
    question: "What is the name of Barty Crouch's house elf?",
    answers: {
        a: "Winky<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Hokey",
        c: "Gimkey",
        d: "Vekey"
    },
    correctAnswer: 'a'
  },
  {
    question: "What does S.P.E.W stand for?",
    answers: {
        a: "Society for the Promotion of Elfish Well-being",
        b: "Society for the Prevention of Elfish Woe",
        c: "Society for the Protection of Elfish Welfare",
        d: "Society for the Promotion of Elfish Welfare<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "What fruit do you have to tickle to gain access to the kitchens at Hogwarts?",
    answers: {
        a: "A banana",
        b: "An orange",
        c: "A pear<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "An apple"
    },
    correctAnswer: 'c'
  },
  {
    question: "What band had Dumbledore booked for the Yule Ball?",
    answers: {
        a: "The Hobgoblins",
        b: "The Bent-Winged Snitches",
        c: "Spellbound",
        d: "The Wierd Sisters<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "What is the password to the prefect's bathroom where Cedric suggests Harry go with his golden egg?",
    answers: {
        a: "Citrus Splash",
        b: "Pine Fresh<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        c: "Lemon Breeze",
        d: "Cool Mint"
    },
    correctAnswer: 'b'
  },
  {
    question: "What is the name of Hagrid's mother?",
    answers: {
        a: "Adrastea",
        b: "Galatea",
        c: "Orinthia",
        d: "Fridwulfa<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "How do you say 'pickaxe' in Gobbledegook?",
    answers: {
        a: "Bladvak<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Kazma",
        c: "Krumpache",
        d: "Hakku"
    },
    correctAnswer: 'a'
  },
  {
    question: "What colour are baby unicorns (less than two years old)?",
    answers: {
        a: "Bronze",
        b: "Silver",
        c: "Gold<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Black"
    },
    correctAnswer: 'c'
  },
  {
    question: "Who gave Harry the Gillyweed on the day of the second task?",
    answers: {
        a: "Cedric Diggory",
        b: "Mad-eye Moody",
        c: "Dobby<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Neville Longbottom"
    },
    correctAnswer: 'c'
  },
  {
    question: "In which magazine/newspaper did Rita Skeeter publish the article about the Hermione-Harry-Krum love triangle?",
    answers: {
        a: "Witch Weekly<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "The Daily Prophet",
        c: "Wizard Enquirer",
        d: "Spell-bound"
    },
    correctAnswer: 'a'
  },
  {
    question: "What name does Sirius as Harry, Ron and Hermione to use when they talk about him?",
    answers: {
        a: "Padfoot",
        b: "Snuffles<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        c: "Wolfie",
        d: "Archer"
    },
    correctAnswer: 'b'
  },
  {
    question: "What is the Fat Lady's best friend called?",
    answers: {
        a: "Iris",
        b: "Rose",
        c: "Violet<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Poppy"
    },
    correctAnswer: 'c'
  },
  {
    question: "Who came to Hogwarts the morning of the third task to show support for Harry along with Molly Weasley?",
    answers: {
        a: "Bill Weasley<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Charlie Weasley",
        c: "Arthur Weasley",
        d: "Percy Weasley"
    },
    correctAnswer: 'a'
  },
  {
    question: "What creature did Harry meet in the maze that gave him a riddle to solve before he could continue?",
    answers: {
        a: "A Manticore",
        b: "A Satyr",
        c: "A Centaur",
        d: "A Sphinx<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "What did Harry do with the winnings from the Triwizard Tournament",
    answers: {
        a: "Gave it all to Cedric's parents",
        b: "Split it 50/50 with Cedric's parents",
        c: "Gave it to Fred and George<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Gave it to Dumbledore to help in the Anti-Voldemeort effort"
    },
    correctAnswer: 'c'
  }
];

function displayTicks(){
  const divArray = 
  Array.from(document.getElementsByClassName('tick'));
  const displayStyle = divArray[0].style.display === 'block' ? 'none' : 'block';
divArray.forEach(div => {
div.style.display = displayStyle;
}); 
}

// Below code inspired from https://simplestepscode.com/javascript-quiz-tutorial/ code has been altered and editted to fit the needs of the 
// Harry Potter quiz, extra elements have been added, and some removed depending on my needs. Almost all variables have been renamed to make 
// it easier for future editing and bug fixing.

let containerOfQuiz = document.getElementById('quiz');
let containerOfResults = document.getElementById('results');
let submitQuizButton = document.getElementById('submit');
let containerOfBottomLinks = document.getElementById('bottomLinks');
let containerOfTopLinks = document.getElementById('topLinks');

generateQuiz(book4Questions, containerOfQuiz, containerOfResults, submitQuizButton, containerOfBottomLinks, containerOfTopLinks);

function generateQuiz(questions, containerOfQuiz, containerOfResults, submitQuizButton){
  // show questions right away
  showQuizQuestions(questions, containerOfQuiz);
  // store output and answer choices for each question
  function showQuizQuestions(questions, containerOfQuiz){
    let output = [];
    let answers;
    for(let i=0; i<questions.length; i++){
      // reset the list of answers
      answers = [];
      /* for each available answer, add a radio button for selection of only one answer (this will be 
      removed via CSS and the whole label will be selectable by the user with stylings affecting the whole label) to show selection */
      for(letter in questions[i].answers){
        answers.push(
            '<input type="radio" id="'+ questions[i].answers[letter] +'" name="question'+i+'" value="'+letter+'">'
            + '<label  for="'+ questions[i].answers[letter] +'">'+ questions[i].answers[letter] +'</label>'
        );
      }
      // add questions and its answers to the quiz 
      output.push(
        '<div class="question"><h3 id="quiz-questions">' +[i+1] + '. ' + questions[i].question + '</h3></div><br>'
        + '<div class="answers">' + answers.join('') + '</div><br>'
      );
    }
    // combine question and it's answers into one string of html and put it on the page (for all 20 questions)
    containerOfQuiz.innerHTML = output.join('');
  }
  function showResults(questions, containerOfQuiz, containerOfResults){
    // gather answer containers from the quiz
    let answerContainers = containerOfQuiz.querySelectorAll('.answers');
    // keep track of user's answers
    let userAnswer = '';
    let numCorrect = 0;
    // for each question...
    for(let i=0; i<questions.length; i++){
      // find selected answer
      userAnswer = (answerContainers[i].querySelector('input[name=question'+i+']:checked')||{}).value;
      // if answer is correct
      if(userAnswer===questions[i].correctAnswer) {
        // add the total of correct answers together and color the answer text green of all the answer labels
        numCorrect++;
        answerContainers[i].style.color = 'green';
      } else /*if answer is wrong or blank, colour the text red*/ {
        answerContainers[i].style.color = 'red';
      }
    }
    // show number of correct answers out of total
    containerOfResults.innerHTML = numCorrect + ' out of ' + questions.length;
    // Add alert once submit button is pressed for a visual prompt and a nice message for the user
    if (numCorrect <= 4){
      alert('You scored ' + numCorrect +'! Better luck next time! Try reading the books a few more times.')
    } else if (numCorrect >= 5 && numCorrect <= 7){
      alert('You scored ' + numCorrect +'! Well done, you know a little bit about Harry Potter! Maybe try re-reading the books to get a better score.')
    } else if (numCorrect >= 8 && numCorrect <= 12){
      alert('You scored ' + numCorrect +'! Well done, you know quite a bit about Harry Potter! Try rereshing your Harry Potter know-how by re-reading the books for a better score.')
    } else if (numCorrect >= 13 && numCorrect <= 16){
      alert('You scored ' + numCorrect +'! Well done, you know loads about Harry Potter! You must have read the books a few times.')
    } else if (numCorrect >= 17 && numCorrect <= 19){
      alert('You scored ' + numCorrect +'! Well done, you are almost at top marks! Try again and see if you can get 20/20.')
    } else {
      alert("You scored " + numCorrect +"! You got top marks! You're a Harry Potter wiz! Try challenging another Harry Potter nerd to see who wins!")
    };    
  }
  // on submit, show results and home, reveal and refresh buttons via making containers visible
  submitQuizButton.onclick = function(){
    showResults(questions, containerOfQuiz, containerOfResults, containerOfBottomLinks);
    containerOfBottomLinks.style.display = "block";
    containerOfTopLinks.style.display = "block";  
    }    
}
