const book2Questions = [
  {
      question: "The Weasley's live in a house called 'The Burrow' but where is it?",
      answers: {
          a: "Upper Flagley",
          b: "Puddlemere",
          c: "Ottery St. Catchpole<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          d: "Tutshill"
      },
      correctAnswer: 'c'
    },
    {
      question: "What book did Mrs Weasley refer to before the garden de-gnoming?",
      answers: {
          a: "Where There’s a Wand There’s a Way",
          b: "Weird Wizarding Dilemmas and Their Solutions",
          c: "Olde and Forgotten Bewitchments and Charmes",
          d: "Gilderoy Lockhart’s Guide to Household Pests<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "Which Quidditch team does Ron support?",
      answers: {
          a: "The Chudley Cannons<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          b: "Falmouth Falcons",
          c: "Holyhead Harpies",
          d: "Wimbourne Wasps "
      },
      correctAnswer: 'a'
    },
    {
      question: "What book was Hermione reading when Ron recieved the Howler from his mother?",
      answers: {
          a: "Voages with Vampires<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          b: "Wanderings with Werewolves",
          c: "Gadding with Ghouls",
          d: "Break with a Banshee"
      },
      correctAnswer: 'a'
    },
    {
      question: "When re-potting madrakes in their first Herbology lesson of second year, who joined Harry, Ron and Hermione?",
      answers: {
          a: "Neville Longbottom",
          b: "Justin Finch-Fletchley<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          c: "Dean Thomas",
          d: "Ernie Macmillan"
      },
      correctAnswer: 'b'
    },
    {
      question: "What is Gilderoy Lockheart's favourite colour?",
      answers: {
          a: "Teal",
          b: "Lilac<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          c: "Lavender",
          d: "Turquoise"
      },
      correctAnswer: 'b'
    },
    {
      question: "How many times did Nearly Headless Nick get hit with an axe during his attempted beheadding?",
      answers: {
          a: "17",
          b: "23",
          c: "45<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          d: "63"
      },
      correctAnswer: 'c'
    },
    {
      question: "Which deathday did Nearly Headless Nick invite Harry to celebrate?",
      answers: {
          a: "250th",
          b: "430th",
          c: "500th<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          d: "665th"
      },
      correctAnswer: 'c'
    },
    {
      question: "Who is the only ghost teacher at Hogwarts?",
      answers: {
          a: "Septima Vector",
          b: "Aurora Sinistra",
          c: "Silvanus Kettleburn",
          d: "Cuthbert Binns<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "In which book can the Polyjuice Potion recipe be found?",
      answers: {
          a: "Moste Potente Potions<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          b: "Magical Drafts and Potions",
          c: "Book of Potions",
          d: "Advanced Potion-Making"
      },
      correctAnswer: 'a'
    },
    {
      question: "Who was the first person to be petrified by the Basilisk?",
      answers: {
          a: "Nearly Headless Nick",
          b: "Colin Creevy<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          c: "Argus Filch",
          d: "Hermione Granger"
      },
      correctAnswer: 'b'
    },
    {
      question: "What Christmas present did the Dursley's send harry in his second year?",
      answers: {
          a: "A 50 pence piece",
          b: "A coat hanger",
          c: "A toothpick<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          d: "A single tissue"
      },
      correctAnswer: 'c'
    },
    {
      question: "Who's robe did Hermione get the cat fur off that she later used in the Polyjuice Potion?",
      answers: {
          a: "Pansy Parkinson",
          b: "Millicent Bulstrode<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          c: "Daphne Greengrass",
          d: "Tracey Davis"
      },
      correctAnswer: 'b'
    },
    {
      question: "Who was the headmaster of Hogwarts when the Chamber of Secrets was last opened 50 years ago?",
      answers: {
          a: "Professor Dumbledore",
          b: "Phineas Nigellus Black",
          c: "Brutus Scrimgeour",
          d: "Professor Dippet<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "What is Aragog's wife called?",
      answers: {
          a: "Moriel",
          b: "Madgi",
          c: "Mosag<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          d: "Morag"
      },
      correctAnswer: 'c'
    },
    {
      question: "Who used to tease Moaning Myrtle about her glasses?",
      answers: {
          a: "Olive Hornby<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          b: "Tom Riddle",
          c: "Peeves",
          d: "Cerelle Peach"
      },
      correctAnswer: 'a'
    },
    {
      question: "Where in their home did the Malfoy's hide their dark magic artefacts?",
      answers: {
          a: "In the basement",
          b: "Behind the tapestry in the dining room",
          c: "Under the drawing room floor<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          d: "In the attic"
      },
      correctAnswer: 'c'
    },
    {
      question: "Who is the leader of the headless hunt?",
      answers: {
          a: "Sir Patrick Delaney-Podmore<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          b: "Sir Peter Duncan-Pangbourne",
          c: "Sir Percy Douglas-Packwood",
          d: "Sir Podric Damson-Portwell"
      },
      correctAnswer: 'a'
    },
    {
      question: "Harry had to speak in Parsletongue to a tap in the bathroom to open the entrance to the Chamber of secrets, what kind of metal was it?",
      answers: {
          a: "Pewter",
          b: "Silver",
          c: "Brass",
          d: "Copper<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
      },
      correctAnswer: 'd'
    },
    {
      question: "Who did Ginny walk in on kissing Percy Weasley?",
      answers: {
          a: "Angelina Johnson",
          b: "Penelope Clearwater<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
          c: "Alicia Spinnet",
          d: "Katie Bell"
      },
      correctAnswer: 'b'
    }
];

function displayTicks(){
  const divArray = 
  Array.from(document.getElementsByClassName('tick'));
  const displayStyle = divArray[0].style.display === 'block' ? 'none' : 'block';
divArray.forEach(div => {
div.style.display = displayStyle;
}); 
}

// Below code inspired from https://simplestepscode.com/javascript-quiz-tutorial/

let containerOfQuiz = document.getElementById('quiz');
let containerOfResults = document.getElementById('results');
let submitQuizButton = document.getElementById('submit');
let containerOfBottomLinks = document.getElementById('bottomLinks');
let containerOfTopLinks = document.getElementById('topLinks');

generateQuiz(book2Questions, containerOfQuiz, containerOfResults, submitQuizButton, containerOfBottomLinks, containerOfTopLinks);

function generateQuiz(questions, containerOfQuiz, containerOfResults, submitQuizButton){
  // show questions right away
  showQuizQuestions(questions, containerOfQuiz);
  // store output and answer choices for each question
  function showQuizQuestions(questions, containerOfQuiz){
    let output = [];
    let answers;
    for(let i=0; i<questions.length; i++){
      // reset the list of answers
      answers = [];
      /* for each available answer, add a radio button for selection of only one answer (this will be 
      removed via CSS and the whole label will be selectable by the user with stylings affecting the whole label) to show selection */
      for(letter in questions[i].answers){
        answers.push(
            '<input type="radio" id="'+ questions[i].answers[letter] +'" name="question'+i+'" value="'+letter+'">'
            + '<label  for="'+ questions[i].answers[letter] +'">'+ questions[i].answers[letter] +'</label>'
        );
      }
      // add questions and its answers to the quiz 
      output.push(
        '<div class="question"><h3 id="quiz-questions">' + questions[i].question + '</h3></div><br>'
        + '<div class="answers">' + answers.join('') + '</div><br>'
      );
    }
    // combine question and it's answers into one string of html and put it on the page (for all 20 questions)
    containerOfQuiz.innerHTML = output.join('');
  }
  function showResults(questions, containerOfQuiz, containerOfResults){
    // gather answer containers from the quiz
    let answerContainers = containerOfQuiz.querySelectorAll('.answers');
    // keep track of user's answers
    let userAnswer = '';
    let numCorrect = 0;
    // for each question...
    for(let i=0; i<questions.length; i++){
      // find selected answer
      userAnswer = (answerContainers[i].querySelector('input[name=question'+i+']:checked')||{}).value;
      // if answer is correct
      if(userAnswer===questions[i].correctAnswer) {
        // add the total of correct answers together and color the answer text green of all the answer labels
        numCorrect++;
        answerContainers[i].style.color = 'green';
      } else /*if answer is wrong or blank, colour the text red*/ {
        answerContainers[i].style.color = 'red';
      }
    }
    // show number of correct answers out of total
    containerOfResults.innerHTML = numCorrect + ' out of ' + questions.length;
    // Add alert once submit button is pressed for a visual prompt and a nice message for the user
    if (numCorrect <= 4){
      alert('You scored ' + numCorrect +'! Better luck next time! Try reading the books a few more times.')
    } else if (numCorrect >= 5 && numCorrect <= 7){
      alert('You scored ' + numCorrect +'! Well done, you know a little bit about Harry Potter! Maybe try re-reading the books to get a better score.')
    } else if (numCorrect >= 8 && numCorrect <= 12){
      alert('You scored ' + numCorrect +'! Well done, you know quite a bit about Harry Potter! Try rereshing your Harry Potter know-how by re-reading the books for a better score.')
    } else if (numCorrect >= 13 && numCorrect <= 16){
      alert('You scored ' + numCorrect +'! Well done, you know loads about Harry Potter! You must have read the books a few times.')
    } else if (numCorrect >= 17 && numCorrect <= 19){
      alert('You scored ' + numCorrect +'! Well done, you are almost at top marks! Try again and see if you can get 20/20.')
    } else {
      alert("You scored " + numCorrect +"! You got top marks! You're a Harry Potter wiz! Try challenging another Harry Potter nerd to see who wins!")
    };    
  }
  // on submit, show results and home, reveal and refresh buttons via making containers visible
  submitQuizButton.onclick = function(){
    showResults(questions, containerOfQuiz, containerOfResults, containerOfBottomLinks);
    containerOfBottomLinks.style.display = "block";
    containerOfTopLinks.style.display = "block";  
    }    
}
