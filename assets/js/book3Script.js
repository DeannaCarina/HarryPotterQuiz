const book3Questions = [
  {
    question: "Who was looking after Aunt Marge's other dogs while she was staying with the Dursleys?",
    answers: {
        a: "Colonel Fubster<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Captain Freeman",
        c: "Sergeant Fuller",
        d: "General Franklin"
    },
    correctAnswer: 'a'
  },
  {
    question: "Before Sirius Black was declared innocent, how many people was he said to have killed with a single curse?",
    answers: {
        a: "11",
        b: "13<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        c: "15",
        d: "17"
    },
    correctAnswer: 'b'
  },
  {
    question: "After Harry left Privet Drive on the Knight Bus, where did he stay prior to the school term starting?",
    answers: {
        a: "At the Burrow",
        b: "At Hogwarts",
        c: "At the Three Broomsticks",
        d: "At the Leaky Cauldron<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "What was the set book for Divination on Harry's book list?",
    answers: {
        a: "Predicting the Unpredictable",
        b: "Broken Balls: When Fortunes Turn Foul",
        c: "Unfogging the Future<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Omens, Oracles & the Goat"
    },
    correctAnswer: 'c'
  },
  {
    question: "What is Professor Lupin's middle name?",
    answers: {
        a: "John<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Charles",
        c: "Henry",
        d: "George"
    },
    correctAnswer: 'a'
  },
  {
    question: "What was the name of the Knight that showed Harry, Ron and Hermoine the way to the North Tower for their first Divination lesson?",
    answers: {
        a: "Sir Waldegrave",
        b: "Sir Abingdon",
        c: "Sir Westmorland",
        d: "Sir Cadogan<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "Which spell did Professor Lupin use on Peeves during his first Defence Against the Dark Arts class with the third years?",
    answers: {
        a: "Waddiwasi<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Oppugno",
        c: "Ebublio",
        d: "Vermiculus"
    },
    correctAnswer: 'a'
  },
  {
    question: "What form does Seamus Finnigan's boggart take?",
    answers: {
        a: "A mummy",
        b: "A spider",
        c: "A snake",
        d: "A banshee<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "What did Professor Snape make Ron do for his detention?",
    answers: {
        a: "Scrub out bedpans in the hospital wing<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Disembowel a barrel full of horned toads",
        c: "Pickle ratsâ€™ brains in the dungeons",
        d: "Sorting out rotten Flobberworms from good ones"
    },
    correctAnswer: 'a'
  },
  {
    question: "What position did Charlie Weasley play on the Gryffindor Quidditch team when he was a student at Hogwarts?",
    answers: {
        a: "Beater",
        b: "Seeker<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        c: "Chaser",
        d: "Keeper"
    },
    correctAnswer: 'b'
  },
  {
    question: "What is the incantation to open the one-eyed witch passageway? ",
    answers: {
        a: "Diminuendo",
        b: "Diffindo",
        c: "Dissendium<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Descendo"
    },
    correctAnswer: 'c'
  },
  {
    question: "How many 'turns' did Professor Dumbledore instruct Hermione to carry out on the Time Turner?",
    answers: {
        a: "2",
        b: "3<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        c: "4",
        d: "5"
    },
    correctAnswer: 'b'
  },
  {
    question: "What was the name of the executioner sent to kill Buckbeak?",
    answers: {
        a: "Corban Yaxley",
        b: "Thorfinn Rowle",
        c: "Walden Macnair<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Antonin Dolohov"
    },
    correctAnswer: 'c'
  },
  {
    question: "On what floor is Professor Flitwick's office?",
    answers: {
        a: "4th",
        b: "5th",
        c: "6th",
        d: "7th<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "What's the total number of real predictions that Professor Trelawny has made as of the end of Harry's 3rd year at Hogwarts?",
    answers: {
        a: "One",
        b: "Two<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        c: "Three",
        d: "Four"
    },
    correctAnswer: 'b'
  },
  {
    question: "Who are the Ravenclaw and Hufflepuff Seekers during Harry's 3rd year at Hogwarts?",
    answers: {
        a: "Cho Chang and Cedric Diggory<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Marcus Belby and Hannah Abbott",
        c: "Roger Davies and Ernie Macmillan",
        d: "Terry Boot and Zacharias Smith"
    },
    correctAnswer: 'a'
  },
  {
    question: "What name did Harry give himself when on the Knight Bus the night he left Privet Drive?",
    answers: {
        a: "Dean Thomas",
        b: "Ron Weasley",
        c: "Vernon Dudley",
        d: "Neville Longbottom<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>"
    },
    correctAnswer: 'd'
  },
  {
    question: "When staying at The Leaky Cauldron, where did Harry do most of his homework?",
    answers: {
        a: "In his bedroom at The Leaky Cauldron",
        b: "Inside Flourish and Blotts book shop",
        c: "Outside Florean Fortescue's Ice Cream Parlour<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "On the steps of Gringotts Bank"
    },
    correctAnswer: 'c'
  },
  {
    question: "After Neville breaks his first cup in Divination, what colour does Professor Trelawny tell him to get for his second?",
    answers: {
        a: "Blue<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        b: "Green",
        c: "Yellow",
        d: "Pink"
    },
    correctAnswer: 'a'
  },
  {
    question: "Who did Gryffindor beat in the final to win the Quidditch trophy?",
    answers: {
        a: "They didn't win the trophy!",
        b: "Hufflepuff",
        c: "Slytherin<div class='tick'><img src='https://i.ibb.co/v43bTPs/tick.png'></div>",
        d: "Ravenclaw"
    },
    correctAnswer: 'c'
  }
];

alert('PLEASE NOTE: All the following questions and answers are based on the third Harry Potter BOOK - not the movie.');

function displayTicks(){
  const divArray = 
  Array.from(document.getElementsByClassName('tick'));
  const displayStyle = divArray[0].style.display === 'block' ? 'none' : 'block';
divArray.forEach(div => {
div.style.display = displayStyle;
}); 
}

// Below code inspired from https://simplestepscode.com/javascript-quiz-tutorial/ code has been altered and editted to fit the needs of the 
// Harry Potter quiz, extra elements have been added, and some removed depending on my needs. Almost all variables have been renamed to make 
// it easier for future editing and bug fixing.

let containerOfQuiz = document.getElementById('quiz');
let containerOfResults = document.getElementById('results');
let submitQuizButton = document.getElementById('submit');
let containerOfBottomLinks = document.getElementById('bottomLinks');
let containerOfTopLinks = document.getElementById('topLinks');

generateQuiz(book3Questions, containerOfQuiz, containerOfResults, submitQuizButton, containerOfBottomLinks, containerOfTopLinks);

function generateQuiz(questions, containerOfQuiz, containerOfResults, submitQuizButton){
  // show questions right away
  showQuizQuestions(questions, containerOfQuiz);
  // store output and answer choices for each question
  function showQuizQuestions(questions, containerOfQuiz){
    let output = [];
    let answers;
    for(let i=0; i<questions.length; i++){
      // reset the list of answers
      answers = [];
      /* for each available answer, add a radio button for selection of only one answer (this will be 
      removed via CSS and the whole label will be selectable by the user with stylings affecting the whole label) to show selection */
      for(letter in questions[i].answers){
        answers.push(
            '<input type="radio" id="'+ questions[i].answers[letter] +'" name="question'+i+'" value="'+letter+'">'
            + '<label  for="'+ questions[i].answers[letter] +'">'+ questions[i].answers[letter] +'</label>'
        );
      }
      // add questions and its answers to the quiz 
      output.push(
        '<div class="question"><h3 id="quiz-questions">' +[i+1] + '. ' + questions[i].question + '</h3></div><br>'
        + '<div class="answers">' + answers.join('') + '</div><br>'
      );
    }
    // combine question and it's answers into one string of html and put it on the page (for all 20 questions)
    containerOfQuiz.innerHTML = output.join('');
  }
  function showResults(questions, containerOfQuiz, containerOfResults){
    // gather answer containers from the quiz
    let answerContainers = containerOfQuiz.querySelectorAll('.answers');
    // keep track of user's answers
    let userAnswer = '';
    let numCorrect = 0;
    // for each question...
    for(let i=0; i<questions.length; i++){
      // find selected answer
      userAnswer = (answerContainers[i].querySelector('input[name=question'+i+']:checked')||{}).value;
      // if answer is correct
      if(userAnswer===questions[i].correctAnswer) {
        // add the total of correct answers together and color the answer text green of all the answer labels
        numCorrect++;
        answerContainers[i].style.color = 'green';
      } else /*if answer is wrong or blank, colour the text red*/ {
        answerContainers[i].style.color = 'red';
      }
    }
    // show number of correct answers out of total
    containerOfResults.innerHTML = numCorrect + ' out of ' + questions.length;
    // Add alert once submit button is pressed for a visual prompt and a nice message for the user
    if (numCorrect <= 4){
      alert('You scored ' + numCorrect +'! Better luck next time! Try reading the books a few more times.')
    } else if (numCorrect >= 5 && numCorrect <= 7){
      alert('You scored ' + numCorrect +'! Well done, you know a little bit about Harry Potter! Maybe try re-reading the books to get a better score.')
    } else if (numCorrect >= 8 && numCorrect <= 12){
      alert('You scored ' + numCorrect +'! Well done, you know quite a bit about Harry Potter! Try rereshing your Harry Potter know-how by re-reading the books for a better score.')
    } else if (numCorrect >= 13 && numCorrect <= 16){
      alert('You scored ' + numCorrect +'! Well done, you know loads about Harry Potter! You must have read the books a few times.')
    } else if (numCorrect >= 17 && numCorrect <= 19){
      alert('You scored ' + numCorrect +'! Well done, you are almost at top marks! Try again and see if you can get 20/20.')
    } else {
      alert("You scored " + numCorrect +"! You got top marks! You're a Harry Potter wiz! Try challenging another Harry Potter nerd to see who wins!")
    };    
  }
  // on submit, show results and home, reveal and refresh buttons via making containers visible
  submitQuizButton.onclick = function(){
    showResults(questions, containerOfQuiz, containerOfResults, containerOfBottomLinks);
    containerOfBottomLinks.style.display = "block";
    containerOfTopLinks.style.display = "block";  
    }    
}
